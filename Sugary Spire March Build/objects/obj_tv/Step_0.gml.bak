scr_tvsprites()
if (room == steamy_1) {
  // global.erank = 16000 
   global.srank = 8000;
    global.arank = (global.srank - (global.srank / 4));
    global.brank = (global.srank - ((global.srank / 4) * 2));
    global.crank = (global.srank - ((global.srank / 4) * 3));
}
if (room == entryway_1)
   {
   //global.erank = 11000
   global.srank = 6000;
    global.arank = (global.srank - (global.srank / 4));
    global.brank = (global.srank - ((global.srank / 4) * 2));
    global.crank = (global.srank - ((global.srank / 4) * 3));
}
if (room == molasses_1)
{
   global.srank = 9000;
    global.arank = (global.srank - (global.srank / 4));
    global.brank = (global.srank - ((global.srank / 4) * 2));
    global.crank = (global.srank - ((global.srank / 4) * 3));
}
if (room == mines_1)
{
   global.srank = 9500;
    global.arank = (global.srank - (global.srank / 4));
    global.brank = (global.srank - ((global.srank / 4) * 2));
    global.crank = (global.srank - ((global.srank / 4) * 3));
}
if (showtext == 1) {
    xi = (500 + random_range(1, -1));
    if (yi > 475)
        yi -= 5;
}
if (showtext == 0) {
    xi = (500 + random_range(1, -1));
    if (yi < 675)
        yi += 1;
}
if (!(obj_player.state == states.knightpep && obj_player.state == states.knightpepattack && obj_player.state == states.knightpepslopes)) once = 0;

//The Funny TV Move
if (obj_player.y < 180 + obj_camera.Cam_y && obj_player.x > camera_get_view_width(view_camera[0]) - 350 + obj_camera.Cam_x) {
	DrawY = lerp(DrawY, -300, 0.15);
	alpha = 0.5;
}
else {
	DrawY = lerp(DrawY, 0, 0.15);
	alpha = 1;
}
if (global.collect > global.arank && shownranka == 0) {
    //image_speed = 0;
    message = "YOU GOT ENOUGH FOR RANK A";
    showtext = 1;
    alarm[0] = 200;
    //tvsprite = 635;
    shownranka = 1;
}
else if (global.collect > global.brank && shownrankb == 0) {
    //image_speed = 0;
    message = "YOU GOT ENOUGH FOR RANK B";
    showtext = 1;
    alarm[0] = 200;
    //tvsprite = 636;
    shownrankb = 1;
}
else if (global.collect > global.crank && shownrankc == 0) {
    //image_speed = 0;
    message = "YOU GOT ENOUGH FOR RANK C";
    showtext = 1;
    alarm[0] = 200;
    //tvsprite = 637;
    shownrankc = 1;
}
/*else if (obj_player.sprite_index == spr_player_levelcomplete)
{
    image_speed = 0.1;
    alarm[0] = 50;
    chose = 1;
    tvsprite = 645;
    once = 1;
}
else if (obj_player.state == states.hurt)
{
    image_speed = 0.1
    showtext = 1
    if (chose == 0)
        message = choose("OW!", "OUCH!", "OH!", "WOH!")
    alarm[0] = 50
    chose = 1
    tvsprite = 643
    once = 1
}
else if (obj_player.state == states.timesup)
{
    alarm[0] = 50
    image_speed = 0.1
    tvsprite = 630
}*/
if (global.hurtcounter >= global.hurtmilestone) {
    alarm[0] = 150;
    //image_speed = 0.1;
    if (obj_player.character == "P")
        character = "PIZZELLE";
    else
        character = "THE PIZZANO";
    message = (((("YOU HAVE HURT " + string(character)) + " ") + string(global.hurtmilestone)) + " TIMES...");
    //if (tvsprite != 634 && tvsprite != 633 && tvsprite != 632 && tvsprite != 631) tvsprite = choose(634, 633, 632, 631);
    global.hurtmilestone += 3;
}
/*else if (obj_player.state == states.skateboard)
{
    showtext = 1
    message = "SWEET DUDE!!"
    alarm[0] = 50
    tvsprite = 638
    once = 1
}
else if (obj_player.state == states.slipnslide)
{
    image_speed = 0.1
    showtext = 1
    message = "OOPS!!"
    alarm[0] = 50
    tvsprite = 640
    once = 1
}
else if (global.combo != 0 && global.combotime != 0 && (tvsprite == 647 || tvsprite == 648 || tvsprite == 649))
{
    tvsprite = 648
    image_speed = 0
    if (global.combo >= 4)
        imageindexstore = 3
    else
        imageindexstore = (global.combo - 1)
}
else if (global.combotime == 0 && tvsprite == 648)
{
    tvsprite = 646
    image_index = imageindexstore
    alarm[0] = 50
}
else if (global.panic == 1)
{
    image_speed = 0.1
    tvsprite = 649
}*/
if (obj_player.state == states.keyget) {
    showtext = 1;
    message = "KEY OBTAINED!";
    alarm[0] = 50;
}
if staticdraw
	statictimer--
if statictimer < 0
	staticdraw = false
if tvsprite != spr_tvturnon && ds_queue_size(global.newhudtvanim) < 1 && tvlength <= 0
{
	switch obj_player.state {
		/*case 0:
			if tvsprite == idletvspr && tvcount < 1 {
				tvsprite = choose(tvchange1, tvchange2, tvchange2, tvchange1);
				image_index = 0;
			}
			if tvsprite != idletvspr tvcount = 500;
			if (tvsprite == tvchange1 && floor(image_index) == (image_number - 1)) || (tvsprite == spr_pizzytv3 && floor(image_index) == (image_number - 1)) {
				tvcount = choose(500, 450, 400, 550);
				tvsprite = idletvspr;
				image_index = 0;
			}
			if tvsprite == idletvspr tvcount -= 1;
			break;*/
		case states.hurt:
			ChannelState = 5;
			tvsprite = hurttvspr
		break;
		case states.minecart:
			ChannelState = 4;
			tvsprite = minecarttvspr
		break;
		case states.fireass:
			ChannelState = 3;
			tvsprite = firetvspr
		break;
		case states.bombpep:
			ChannelState = 2;
			tvsprite = bombtvspr
		break;
		case states.cotton:
		case states.cottondrill:
		case states.cottonroll:
			ChannelState = 1;
			tvsprite = cottontvspr
		break;
		case states.mach2:
		case states.machslide:
		case states.climbwall:
			ChannelState = 6;
			tvsprite = machtvspr
		break;
		case states.mach3:
			ChannelState = 7;
			tvsprite = maxspeedtvspr
		break;
		default:
		
			if obj_player.angry == 0
			{
				ChannelState = 0;
				//Normal Idles
				if tvsprite != idletvspr && !(tvsprite == tvchange1 || tvsprite == tvchange2) {
					tvcount = choose(500, 450, 400, 550);
					tvsprite = idletvspr;
					image_index = 0;					
				}
				//Idle Animations
				if tvsprite == idletvspr && tvcount < 1 {
					tvsprite = choose(tvchange1, tvchange2, tvchange2, tvchange1);
					image_index = 0;
				}				
				//End of Idle Animations
				if (tvsprite == tvchange1 && animation_end()) || (tvsprite == tvchange2 && animation_end()) {
					tvcount = choose(500, 450, 400, 550);
					tvsprite = idletvspr;
					image_index = 0;
				}
				//Idle Animations Timer
				if tvsprite == idletvspr 
					tvcount--;
			}
			else
			{
				ChannelState = 8;
				tvsprite = angrytvspr
			}
			break;
	}
	
	if OLDChannelState != ChannelState
	{
		staticdraw = true;
		statictimer = 20;
		OLDChannelState = ChannelState;
	}	
}

else if tvsprite != spr_tvturnon && ds_queue_size(global.newhudtvanim) > 1
{
	tvsprite = ds_queue_dequeue(global.newhudtvanim);
	tvlength = ds_queue_dequeue(global.newhudtvanim);
}

	
if tvlength > 0
{
	ChannelState = 99;
	if OLDChannelState != ChannelState
	{
		staticdraw = true;
		statictimer = 20;
		OLDChannelState = ChannelState;
	}	
}
	
tvlength--



if global.key_inv == 1 
	invsprite = spr_invkey;
else if global.treat == 1 && global.key_inv != 1
	invsprite = spr_invdonut;
else 
	invsprite = spr_invempty;
	
if global.combotime > 0 {
	combofade = clamp(combofade + 0.25, 0, 2);
	chooseOnecomboend = false;

}
if global.combotime <= 0 {
	combofade = clamp(combofade - 0.05, 0, 2)
	if chooseOnecomboend = false {
		combofade = 2;
		comboendImage = irandom_range(0, sprite_get_number(spr_tvcomboend) - 1);	
		chooseOnecomboend = true;
	}	
}
if tvsprite == spr_tvturnon && floor(image_index) == (image_number - 1) 
	tvsprite = idletvspr;
<<<<<<< HEAD
var roomname = room_get_name(room)
 if (string_letters(roomname)) == "tutorial" 
 {
	 tvsprite = spr_tvstatic
 }
sprite_index = tvsprite;

if global.combotime > 0
	scr_queue_tvanim(spr_pizzytv_combo, 1)
if global.combo >= 10 && global.combotime <= 1
	scr_queue_tvanim(spr_pizzytvhappy, 240)
=======
sprite_index = tvsprite;
>>>>>>> ching-funny-moments
