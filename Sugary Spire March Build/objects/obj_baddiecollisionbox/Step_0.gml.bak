var angle,ymovespeed,vdirection;
if (!instance_exists(baddieID))
    instance_destroy();
if instance_exists(baddieID)
{
    x = baddieID.x;
    y = baddieID.y;
    image_xscale = baddieID.image_xscale;
}
if (instance_exists(baddieID) && place_meeting(x, y, obj_player) && obj_player.cutscene == 0 && obj_player.state != states.hurt)
{
    if (baddieID.state != baddiestate.grabbed)
    {
        with (obj_player)
        {

            if (instakillmove == 1 && other.baddieID.object_index != obj_pizzaball)
            {
				angle = point_direction(other.baddieID.x, other.baddieID.y,x + hsp, y + vsp );		
				ymovespeed = 2 + abs(vsp)
				vdirection = sign(round(hsp + xscale/2))
				scr_sound(sound_punch)
				scr_sleep()
				other.baddieID.initialvsp = clamp(-lengthdir_y(ymovespeed, angle) - 2,-25,(random_range(-1,-15)))
				other.baddieID.initialhsp = (vdirection * ((random_range(1,7)) + abs(floor(hsp * 1.2))))
				if state = states.pizzanokungfu
				blowdirection = 6
				else
				{
				scr_sleep();
                instance_destroy(other.baddieID);
                instance_destroy(other.id);
				with instance_create(x,y,obj_bangeffect)
				sprite_index = spr_enemypuncheffect
                global.hit += 1;
                global.combotime = 60;
				
                if ((!grounded) && state != states.freefall && key_jump2)
                {
                    suplexmove = 0;
                    vsp = -11;
                }
				}
            }
			if (state == states.cottonroll && movespeed <= 8) {
				if !audio_is_playing(sound_bump)
					scr_sound(sound_bump);
				other.baddieID.stuntouch = 50;
				other.baddieID.state = baddiestate.stun;
				
				if (other.baddieID.stunned < 100)
					other.baddieID.stunned = 100;					
				other.baddieID.image_xscale = -xscale
				other.baddieID.hsp = ((-other.baddieID.image_xscale) * 5);
				other.baddieID.vsp = -4;
			}
            if (instance_exists(other.baddieID) && other.baddieID.object_index != obj_eyescream && y < other.baddieID.y && attacking == 0 && state == states.jump && vsp > 0 && other.baddieID.vsp >= 0 && sprite_index != spr_stompprep)
            {
                scr_sound(sound_enemyslap);
                suplexmove = 0;
                if (other.baddieID.object_index == obj_pizzaball)
                    global.golfhit += 1;
                if (vsp > 0)
                {
					other.baddieID.squashedx = true
					other.baddieID.squashvalx = 0						
                    other.baddieID.stunned = 200;
                    if (x != other.baddieID.x)
                        other.baddieID.image_xscale = (-sign((other.baddieID.x - x)));
                    image_index = 0;
                    if key_jump2
                    {
                        other.baddieID.vsp = -5;
                        other.baddieID.hsp = ((-other.baddieID.image_xscale) * 3);
                        instance_create(x, (y + 50), obj_stompeffect);
                        other.baddieID.state = baddiestate.stun;
                        stompAnim = 1;
                        other.baddieID.image_index = 0;
                        vsp = -14;
                        sprite_index = spr_stompprep;
                    }
                    else
                    {
                        other.baddieID.vsp = -5
                        other.baddieID.hsp = ((-other.baddieID.image_xscale) * 3)
                        instance_create(x, (y + 50), obj_stompeffect)
                        other.baddieID.state = baddiestate.stun						
                        stompAnim = 1
                        other.baddieID.image_index = 0
                        vsp = -9
                        sprite_index = spr_stompprep
                    }
                }
            }
			if instance_exists(other.baddieID) && (state == states.cotton && sprite_index == spr_cotton_attack) {
				with other.baddieID { //Throw Baddie
					cottoned = true
					alarm[2] = 1
					instance_create(x, y, obj_bangeffect)
					scr_sound(sound_slaphit)
					hp = 0;
					thrown = true;
					hsp = obj_player.xscale * 20;
					vsp = -6;
					state = baddiestate.stun;
					stunned = 500;
				}			
			}					
/*            if (instance_exists(other.baddieID) && y > other.baddieID.y && other.baddieID.vsp > 0)
            {
            if object_index = obj_sluggy && obj_sluggy.state != baddiestate.slugparry
			{
			if (other.baddieID.object_index == obj_pizzaball)
                    global.golfhit += 1
                other.baddieID.stunned = 200
                if (x != other.baddieID.x)
                    other.baddieID.image_xscale = (-sign((other.baddieID.x - x)))
                other.baddieID.vsp = -5
                other.baddieID.hsp = ((-other.baddieID.image_xscale) * 5)
                instance_create(x, (y - 50), obj_stompeffect)
                other.baddieID.state = baddiestate.stun
                other.baddieID.image_index = 0
                scr_sound(sound_enemystomp)	
			}
				if (other.baddieID.object_index == obj_pizzaball)
                    global.golfhit += 1
                other.baddieID.stunned = 200
                if (x != other.baddieID.x)
                    other.baddieID.image_xscale = (-sign((other.baddieID.x - x)))
                other.baddieID.vsp = -5
                other.baddieID.hsp = ((-other.baddieID.image_xscale) * 5)
                instance_create(x, (y - 50), obj_stompeffect)
                other.baddieID.state = baddiestate.stun
                other.baddieID.image_index = 0
                scr_sound(sound_enemystomp)
            }*/
			if instance_exists(other.baddieID) && other.baddieID.object_index != obj_eyescream && instakillmove = 0 && other.baddieID.vsp > 0 && state != states.hurt && state != states.superslam && state != states.finishingblow && state != states.handstandjump && state != states.pizzanokungfu && state != states.pizzanopummel && state != states.coneboyinhale && state != states.mach2 && state != states.frozen //&& other.baddieID.grounded = 1 
			{
				if other.baddieID.stuntouch <= 0
				{
					scr_sound(sound_bump);
					other.baddieID.stuntouch = 50;
					other.baddieID.state = baddiestate.stun;
					
					if (other.baddieID.stunned < 100)
						other.baddieID.stunned = 100;					
					if (x != other.baddieID.x)
						other.baddieID.image_xscale = (-sign((other.baddieID.x - x)))					
					other.baddieID.hsp = ((-other.baddieID.image_xscale) * 2);
					other.baddieID.vsp = -5;
				}
			}
            if (instance_exists(other.baddieID) && state == states.mach1)
            {
                if (other.baddieID.object_index == obj_pizzaball) global.golfhit += 1;
                global.hit += 1;
                global.combotime = 60;
                instance_create(other.baddieID.x, other.baddieID.y, obj_slapstar);
                instance_create(other.baddieID.x, other.baddieID.y, obj_baddiegibs);
                other.baddieID.flash = 1;
                other.baddieID.hp = 0;
                scr_sound(sound_enemystomp);
                instance_create(x, y, obj_bumpeffect);
                other.baddieID.stunned = 200;
                if (x != other.baddieID.x)
                    other.baddieID.image_xscale = (-sign((other.baddieID.x - x)));
                other.baddieID.vsp = -5;
                other.baddieID.hsp = ((-other.baddieID.image_xscale) * 5);
                hsp = ((-xscale) * 3);
                vsp = -4;
                machpunchAnim = true;
                if (x != other.baddieID.x)
                    other.baddieID.image_xscale = (-sign((other.baddieID.x - x)));
                other.baddieID.state = baddiestate.stun;
                image_index = 0;
				sprite_index = spr_canehit;
                state = states.tackle;
                if (other.baddieID.hp == 0 && other.baddieID.object_index != obj_boss) {
                    instance_destroy(other.id);
                    instance_destroy(other.baddieID);
                }
                else if (other.baddieID.hp <= 0 && other.baddieID.object_index == obj_boss) {
                    other.baddieID.thrown = 1;
                    vsp = -5;
                }
            }
            if (instance_exists(other.baddieID) && (state == states.mach2 || state == states.pizzanosidejump || state == states.pizzanoshoulderbash || state == states.flushed || (state = states.mach3 && character = "N")) && other.baddieID.grounded == 1) {
				if (other.baddieID.object_index == obj_pizzaball) global.golfhit += 1;
                global.hit += 1;
                global.combotime = 60;
                instance_create(other.baddieID.x, other.baddieID.y, obj_slapstar);
                instance_create(other.baddieID.x, other.baddieID.y, obj_baddiegibs);
                other.baddieID.flash = 1;
                other.baddieID.hp = 0;
                scr_sound(sound_enemystomp);
                instance_create(x, y, obj_bumpeffect);
                other.baddieID.vsp = -10;
                other.baddieID.hsp = xscale;
                other.baddieID.image_index = 0;
				machpunchAnim = true;
                other.baddieID.stunned = 200;
                other.baddieID.state = baddiestate.stun;
                if ((!grounded) && state != states.freefall && key_jump2) {
                    suplexmove = 0;
                    sprite_index = spr_mach2jump;
                    vsp = -11;
                }
                if (other.baddieID.hp == 0 && other.baddieID.object_index != obj_boss) {
                    instance_destroy(other.baddieID);
                    instance_destroy(other.id);
                }
                else if (other.baddieID.hp <= 0 && other.baddieID.object_index == obj_boss) {
                    other.baddieID.thrown = 1;
                    vsp = -5;
                }
            }
			if (instance_exists(other.baddieID) && state == states.pizzanopummel) {
                global.combotime = 60;
				repeat(3) 
				{
					instance_create(other.baddieID.x, other.baddieID.y, obj_slapstar);
					instance_create(other.baddieID.x, other.baddieID.y, obj_baddiegibs);
				}
				with instance_create(x, y, obj_bangeffect)
				sprite_index = spr_enemypuncheffect;
				other.baddieID.sprite_index = other.baddieID.deadspr
                other.baddieID.vsp = 0;
                other.baddieID.hsp = 0;
				other.baddieID.vsp = 0
				other.baddieID.hp -= 1
				scr_sleep(150)
				if !grounded
					vsp = -12
				camera_shake(15,50)
				other.baddieID.squashedx = true
                scr_sound(sound_punch);
                other.baddieID.image_index = 0;
				machpunchAnim = true;
                baddiegrabbedID = other.baddieID.id;
				with (other.baddieID) {
					state = baddiestate.grabbed;
					instance_create((x + (other.xscale * 40)), y, obj_punchdust)
				}
			if !key_up {
				vsp = 0
				hsp = 0
				movespeed = 0
				image_index = 0
				sprite_index = spr_pizzano_lungehit
				state = states.finishingblow
			}
			else
			{
					state = states.superslam;
					sprite_index = spr_player_piledriverstart;
					if grounded
						vsp = -12;
					else
						vsp = -6;
					grounded = false;
					image_index = 0;
					image_speed = 0.35;	
				}
			
			}
            if (instance_exists(other.baddieID) && other.baddieID.state != baddiestate.charge && attacking == 0 && state != states.tackle && state != states.hurt && (!y < other.baddieID.y) && (!y > other.baddieID.y) && grabbing == 0 && other.baddieID.state != baddiestate.stun && state != states.handstandjump && state != states.Nhookshot) {
                if (x != other.baddieID.x) {
                    other.baddieID.image_xscale = (-sign((other.baddieID.x - x)));
                    xscale = (-sign((x - other.baddieID.x)));
                }
                hsp = ((-xscale) * 8);
                if (other.baddieID.object_index == obj_pizzaball) global.golfhit += 1;
                vsp = -4;
                other.baddieID.image_xscale = (-xscale);
                other.baddieID.hsp = ((-other.baddieID.image_xscale) * 4);
                other.baddieID.vsp = -4;
                if (other.baddieID.state == baddiestate.walk || other.baddieID.state == baddiestate.turn) other.baddieID.state = baddiestate.stun;
                if (other.baddieID.state == 87) {
                    stunned = 30;
                    other.baddieID.state = baddiestate.stun;
                }
                image_index = 0;
                state = states.bump;
                if (other.baddieID.state == 96) other.baddieID.state = baddiestate.stun;
            }
			if state == states.handstandjump && other.baddieID.object_index != obj_charcherry  {
				scr_sound(sound_slaphit);
				baddiegrabbedID = other.baddieID.id;
				with (other.baddieID) {
					state = baddiestate.grabbed;
					instance_create((x + (other.xscale * 40)), y, obj_punchdust)
				}				
				if !key_up {
					state = states.grab;
					sprite_index = spr_player_haulingstart;
					image_index = 0;
				} else {
					state = states.superslam;
					sprite_index = spr_player_piledriverstart;
					if grounded
						vsp = -12;
					else
						vsp = -6;
					grounded = false;
					image_index = 0;
					image_speed = 0.35;	
				}
			}
        }
    }
}
if (!instance_exists(baddieID)) instance_destroy();